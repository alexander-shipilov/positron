@import "../expect";
@import "./proto";
@import "./is-a";
@import "./is-string";

@include describe(prototype) {
    @include describe(proto) {
        $proto: proto("string");

        @include it("creates new prototype", (
            is-string($proto) true,
            is-proto($proto) true,
        ));
    }

    @include describe(new) {
        $proto: proto("string");
        $value: new($proto, "foo");

        @include it("creates new value of prototype", (
            is-a("map", $value) true,
            instance-of($proto, $value) true,
            value-of($proto, $value) "foo"
        ));

        @include it("should throw if the passed value does not match type of proto", (
            to-throw(new, $proto, 1) true,
            to-throw(new, $proto, true) true,
        ));
    }

    @include describe("chaining") {
        $proto1: proto();
        $proto2: proto($super: $proto1);

        @include it("should nested proto should implement super", (
            instance-of($proto1, new($proto2)) true,
            instance-of($proto2, new($proto2)) true,
        ));
    }
}