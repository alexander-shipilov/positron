@import "@describe";
@import "expect";
@import "func";

$--show-passed: true !default;

@mixin it($description, $tests: null) {
    $errors: ();

    @if ($tests != null) {
        @each $value, $expected, $message in $tests {
            $error: expect($value, $expected, $message);

            @if ($error != null) {
                $errors: append($errors, $error);
            }
        }
    }

    $errors-length: length($errors);
    @if ($--show-passed == true or $errors-length != 0) {
        @debug "[#{ if($errors-length == 0, PASSED, FAILED) }] #{ $description }";
    }

    @if ($errors-length != 0) {
        @each $error in $errors {
            @debug $error;
        }
    }
}
